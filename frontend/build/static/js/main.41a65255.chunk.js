(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{172:function(e,t,a){},197:function(e){e.exports=JSON.parse('{"v":"5.5.2","fr":60,"ip":0,"op":104,"w":84,"h":40,"nm":"Typing-Indicator","ddd":0,"assets":[],"layers":[{"ddd":0,"ind":1,"ty":4,"nm":"Oval 3","sr":1,"ks":{"o":{"a":1,"k":[{"i":{"x":[0.643],"y":[1]},"o":{"x":[1],"y":[0]},"t":18,"s":[35],"e":[100]},{"i":{"x":[0.099],"y":[1]},"o":{"x":[0.129],"y":[0]},"t":33,"s":[100],"e":[35]},{"i":{"x":[0.833],"y":[1]},"o":{"x":[0.167],"y":[0]},"t":65,"s":[35],"e":[35]},{"t":71}],"ix":11,"x":"var $bm_rt;\\n$bm_rt = loopOut(\'cycle\', 0);"},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[61,20,0],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":1,"k":[{"i":{"x":[0.667,0.667,0.667],"y":[1,1,1]},"o":{"x":[1,1,0.333],"y":[0,0,0]},"t":18,"s":[100,100,100],"e":[140,140,100]},{"i":{"x":[0.032,0.032,0.667],"y":[1,1,1]},"o":{"x":[0.217,0.217,0.333],"y":[0,0,0]},"t":33,"s":[140,140,100],"e":[100,100,100]},{"i":{"x":[0.833,0.833,0.833],"y":[1,1,1]},"o":{"x":[0.167,0.167,0.167],"y":[0,0,0]},"t":65,"s":[100,100,100],"e":[100,100,100]},{"t":71}],"ix":6,"x":"var $bm_rt;\\n$bm_rt = loopOut(\'cycle\', 0);"}},"ao":0,"shapes":[{"ty":"gr","it":[{"d":1,"ty":"el","s":{"a":0,"k":[12,12],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"nm":"Ellipse Path 1","mn":"ADBE Vector Shape - Ellipse","hd":false},{"ty":"fl","c":{"a":0,"k":[0.847000002861,0.847000002861,0.847000002861,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Oval 3","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":3600,"st":0,"bm":0},{"ddd":0,"ind":2,"ty":4,"nm":"Oval 2","sr":1,"ks":{"o":{"a":1,"k":[{"i":{"x":[0.667],"y":[1]},"o":{"x":[1],"y":[0]},"t":9,"s":[35],"e":[98]},{"i":{"x":[0.023],"y":[1]},"o":{"x":[0.179],"y":[0]},"t":24,"s":[98],"e":[35]},{"i":{"x":[0.833],"y":[1]},"o":{"x":[0.167],"y":[0]},"t":56,"s":[35],"e":[35]},{"t":62}],"ix":11,"x":"var $bm_rt;\\n$bm_rt = loopOut(\'cycle\', 0);"},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[41,20,0],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":1,"k":[{"i":{"x":[0.654,0.654,0.667],"y":[1,1,1]},"o":{"x":[1,1,0.333],"y":[0,0,0]},"t":9,"s":[100,100,100],"e":[140,140,100]},{"i":{"x":[0.11,0.11,0.667],"y":[1,1,1]},"o":{"x":[0.205,0.205,0.333],"y":[0,0,0]},"t":24,"s":[140,140,100],"e":[100,100,100]},{"i":{"x":[0.833,0.833,0.833],"y":[1,1,1]},"o":{"x":[0.167,0.167,0.167],"y":[0,0,0]},"t":56,"s":[100,100,100],"e":[100,100,100]},{"t":62}],"ix":6,"x":"var $bm_rt;\\n$bm_rt = loopOut(\'cycle\', 0);"}},"ao":0,"shapes":[{"ty":"gr","it":[{"d":1,"ty":"el","s":{"a":0,"k":[12,12],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"nm":"Ellipse Path 1","mn":"ADBE Vector Shape - Ellipse","hd":false},{"ty":"fl","c":{"a":0,"k":[0.847000002861,0.847000002861,0.847000002861,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Oval 2","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":3600,"st":0,"bm":0},{"ddd":0,"ind":3,"ty":4,"nm":"Oval 1","sr":1,"ks":{"o":{"a":1,"k":[{"i":{"x":[0.667],"y":[1]},"o":{"x":[1],"y":[0]},"t":0,"s":[35],"e":[100]},{"i":{"x":[0.067],"y":[1]},"o":{"x":[0.125],"y":[0]},"t":15,"s":[100],"e":[35]},{"i":{"x":[0.833],"y":[1]},"o":{"x":[0.167],"y":[0]},"t":47,"s":[35],"e":[35]},{"t":53}],"ix":11,"x":"var $bm_rt;\\n$bm_rt = loopOut(\'cycle\', 0);"},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[21,20,0],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":1,"k":[{"i":{"x":[0.673,0.673,0.667],"y":[1,1,1]},"o":{"x":[1,1,0.333],"y":[0,0,0]},"t":0,"s":[100,100,100],"e":[140,140,100]},{"i":{"x":[0.049,0.049,0.667],"y":[1,1,1]},"o":{"x":[0.198,0.198,0.333],"y":[0,0,0]},"t":15,"s":[140,140,100],"e":[100,100,100]},{"i":{"x":[0.833,0.833,0.833],"y":[1,1,1]},"o":{"x":[0.167,0.167,0.167],"y":[0,0,0]},"t":47,"s":[100,100,100],"e":[100,100,100]},{"t":53}],"ix":6,"x":"var $bm_rt;\\n$bm_rt = loopOut(\'cycle\', 0);"}},"ao":0,"shapes":[{"ty":"gr","it":[{"d":1,"ty":"el","s":{"a":0,"k":[12,12],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"nm":"Ellipse Path 1","mn":"ADBE Vector Shape - Ellipse","hd":false},{"ty":"fl","c":{"a":0,"k":[0.847000002861,0.847000002861,0.847000002861,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Oval 1","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":3600,"st":0,"bm":0},{"ddd":0,"ind":4,"ty":4,"nm":"BG","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[42,20,0],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[0,0],[0,0],[0,0]],"o":[[0,0],[0,0],[0,0],[0,0]],"v":[[-42,-20],[42,-20],[42,20],[-42,20]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"rd","nm":"Round Corners 1","r":{"a":0,"k":20,"ix":1},"ix":2,"mn":"ADBE Vector Filter - RC","hd":false},{"ty":"fl","c":{"a":0,"k":[0.96078401804,0.96078401804,0.96078401804,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"BG","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":3600,"st":0,"bm":0}],"markers":[]}')},219:function(e,t,a){},220:function(e,t,a){},262:function(e,t,a){},314:function(e,t,a){"use strict";a.r(t);var s=a(0),i=a(48),r=a.n(i),o=(a(219),a(220),a(365)),n=a(338),c=a(339),l=a(340),d=a(341),b=a(373),j=a(15),h=a(201),x=a(87),u=a(333),p=a(334),m=a(335),O=a(336),g=a(372),f=a(7),y=a.n(f),v=a(136),C=a(74),k=a.n(C);var w=a(1);const S=Object(s.createContext)();let z;const _=()=>Object(s.useContext)(S);var A=e=>{let{children:t}=e;const[a,i]=Object(s.useState)(),[r,n]=Object(s.useState)(),[c,l]=Object(s.useState)([]),[d,b]=Object(s.useState)(),h=Object(j.e)(),x=Object(o.a)();return Object(s.useEffect)((()=>{const e=JSON.parse(localStorage.getItem("userInfo"));n(e),e||h.push("/")}),[h]),Object(s.useEffect)((()=>{if(r)return z=k()("http://localhost:5000"),z.emit("setup",r),z.on("reminderDue",(e=>{console.log("Reminder Due:",e),console.log("\ud83d\udd14 Reminder received:",e),(e=>{"Notification"in window&&"granted"===Notification.permission&&navigator.serviceWorker.ready.then((t=>{t.showNotification("\ud83d\udd14 ".concat(e.title||"Reminder Due"),{body:e.message,icon:"/favicon.ico",badge:"/favicon.ico",tag:"reminder-"+e._id,renotify:!0,requireInteraction:!0,actions:[{action:"mark-done",title:"\u2705 Mark Done"},{action:"remind-again",title:"\u23f0 Remind Later"}],data:{id:e._id,message:e.message,token:e.token}})}))})(Object(v.a)(Object(v.a)({},e),{},{token:r.token,title:e.title||"Reminder Due"})),x({title:"\u23f0 Reminder Due",description:e.message,status:"info",duration:5e3,isClosable:!0})})),()=>{z.off("reminderDue")}}),[r,x]),Object(w.jsx)(S.Provider,{value:{selectedChat:a,setSelectedChat:i,user:r,setUser:n,notification:c,setNotification:l,chats:d,setChats:b,socket:z},children:t})};var F=()=>{const[e,t]=Object(s.useState)(!1),a=Object(o.a)(),[i,r]=Object(s.useState)(),[n,c]=Object(s.useState)(),[l,d]=Object(s.useState)(!1),b=Object(j.e)(),{setUser:f}=_();return Object(w.jsxs)(g.c,{spacing:"10px",children:[Object(w.jsxs)(x.a,{id:"email",isRequired:!0,children:[Object(w.jsx)(u.a,{children:"Email Address"}),Object(w.jsx)(p.a,{value:i,type:"email",placeholder:"Enter Your Email Address",onChange:e=>r(e.target.value)})]}),Object(w.jsxs)(x.a,{id:"password",isRequired:!0,children:[Object(w.jsx)(u.a,{children:"Password"}),Object(w.jsxs)(m.a,{size:"md",children:[Object(w.jsx)(p.a,{value:n,onChange:e=>c(e.target.value),type:e?"text":"password",placeholder:"Enter password"}),Object(w.jsx)(O.a,{width:"4.5rem",children:Object(w.jsx)(h.a,{h:"1.75rem",size:"sm",color:"black",onClick:()=>t(!e),children:e?"Hide":"Show"})})]})]}),Object(w.jsx)(h.a,{colorScheme:"blue",width:"50%",borderRadius:"25px",style:{marginTop:15},onClick:async()=>{if(d(!0),!i||!n)return a({title:"Please Fill all the Feilds",status:"warning",duration:5e3,isClosable:!0,position:"bottom"}),void d(!1);try{const e={headers:{"Content-type":"application/json"}},{data:t}=await y.a.post("/api/user/login",{email:i,password:n},e);a({title:"Login Successful",status:"success",duration:5e3,isClosable:!0,position:"bottom"}),f(t),localStorage.setItem("userInfo",JSON.stringify(t)),d(!1),b.push("/chats")}catch(e){a({title:"Error Occured!",description:e.response.data.message,status:"error",duration:5e3,isClosable:!0,position:"bottom"}),d(!1)}},isLoading:l,children:"Login"}),Object(w.jsx)(h.a,{variant:"solid",colorScheme:"red",width:"100%",borderRadius:"25px",onClick:()=>{r("guest@example.com"),c("123456")},children:"Get Guest User Credentials"})]})};var R=()=>{const[e,t]=Object(s.useState)(!1),a=()=>t(!e),i=Object(o.a)(),r=Object(j.e)(),[n,c]=Object(s.useState)(),[l,d]=Object(s.useState)(),[b,f]=Object(s.useState)(),[v,C]=Object(s.useState)(),[k,S]=Object(s.useState)(),[z,_]=Object(s.useState)(!1);return Object(w.jsxs)(g.c,{spacing:"5px",children:[Object(w.jsxs)(x.a,{id:"first-name",isRequired:!0,children:[Object(w.jsx)(u.a,{children:"Name"}),Object(w.jsx)(p.a,{placeholder:"Enter Your Name",onChange:e=>c(e.target.value)})]}),Object(w.jsxs)(x.a,{id:"email",isRequired:!0,children:[Object(w.jsx)(u.a,{children:"Email Address"}),Object(w.jsx)(p.a,{type:"email",placeholder:"Enter Your Email Address",onChange:e=>d(e.target.value)})]}),Object(w.jsxs)(x.a,{id:"password",isRequired:!0,children:[Object(w.jsx)(u.a,{children:"Password"}),Object(w.jsxs)(m.a,{size:"md",children:[Object(w.jsx)(p.a,{type:e?"text":"password",placeholder:"Enter Password",onChange:e=>C(e.target.value)}),Object(w.jsx)(O.a,{width:"4.5rem",children:Object(w.jsx)(h.a,{h:"1.75rem",size:"sm",color:"black",onClick:a,children:e?"Hide":"Show"})})]})]}),Object(w.jsxs)(x.a,{id:"password",isRequired:!0,children:[Object(w.jsx)(u.a,{children:"Confirm Password"}),Object(w.jsxs)(m.a,{size:"md",children:[Object(w.jsx)(p.a,{type:e?"text":"password",placeholder:"Confirm password",onChange:e=>f(e.target.value)}),Object(w.jsx)(O.a,{width:"4.5rem",children:Object(w.jsx)(h.a,{h:"1.75rem",size:"sm",color:"black",onClick:a,children:e?"Hide":"Show"})})]})]}),Object(w.jsxs)(x.a,{id:"pic",children:[Object(w.jsx)(u.a,{children:"Upload your Picture"}),Object(w.jsx)(p.a,{type:"file",p:1.5,accept:"image/*",onChange:e=>(e=>{if(_(!0),void 0!==e){if(console.log(e),"image/jpeg"!==e.type&&"image/png"!==e.type)return i({title:"Please Select an Image!",status:"warning",duration:5e3,isClosable:!0,position:"bottom"}),void _(!1);{const t=new FormData;t.append("file",e),t.append("upload_preset","chat-app"),t.append("cloud_name","piyushproj"),fetch("https://api.cloudinary.com/v1_1/piyushproj/image/upload",{method:"post",body:t}).then((e=>e.json())).then((e=>{S(e.url.toString()),console.log(e.url.toString()),_(!1)})).catch((e=>{console.log(e),_(!1)}))}}else i({title:"Please Select an Image!",status:"warning",duration:5e3,isClosable:!0,position:"bottom"})})(e.target.files[0])})]}),Object(w.jsx)(h.a,{colorScheme:"blue",width:"100%",style:{marginTop:15},onClick:async()=>{if(_(!0),!n||!l||!v||!b)return i({title:"Please Fill all the Feilds",status:"warning",duration:5e3,isClosable:!0,position:"bottom"}),void _(!1);if(v===b){console.log(n,l,v,k);try{const e={headers:{"Content-type":"application/json"}},{data:t}=await y.a.post("/api/user",{name:n,email:l,password:v,pic:k},e);console.log(t),i({title:"Registration Successful",status:"success",duration:5e3,isClosable:!0,position:"bottom"}),localStorage.setItem("userInfo",JSON.stringify(t)),_(!1),r.push("/chats")}catch(e){i({title:"Error Occured!",description:e.response.data.message,status:"error",duration:5e3,isClosable:!0,position:"bottom"}),_(!1)}}else i({title:"Passwords Do Not Match",status:"warning",duration:5e3,isClosable:!0,position:"bottom"})},isLoading:z,children:"Sign Up"})]})};var E=function(){const e=Object(j.e)();return Object(o.a)(),Object(s.useEffect)((()=>{JSON.parse(localStorage.getItem("userInfo"))&&e.push("/chats")}),[e]),Object(w.jsx)(n.a,{minH:"100vh",w:"100%",bgGradient:"linear(to-r, purple.800, blue.500)",display:"flex",justifyContent:"center",alignItems:"center",px:4,children:Object(w.jsxs)(c.a,{maxW:"sm",bg:"whiteAlpha.100",backdropFilter:"blur(10px)",border:"1px solid rgba(255,255,255,0.2)",borderRadius:"lg",boxShadow:"xl",p:6,color:"white",children:[Object(w.jsx)(l.a,{direction:"column",align:"center",mb:4,children:Object(w.jsx)(d.a,{fontSize:"3xl",fontWeight:"bold",fontFamily:"Work sans",children:"sawCollab"})}),Object(w.jsxs)(b.e,{isFitted:!0,variant:"soft-rounded",colorScheme:"purple",children:[Object(w.jsxs)(b.b,{mb:"1em",children:[Object(w.jsx)(b.a,{_selected:{bg:"whiteAlpha.900"},children:"Login"}),Object(w.jsx)(b.a,{_selected:{bg:"whiteAlpha.900"},children:"Sign Up"})]}),Object(w.jsxs)(b.d,{children:[Object(w.jsx)(b.c,{children:Object(w.jsx)(F,{})}),Object(w.jsx)(b.c,{children:Object(w.jsx)(R,{})})]})]})]})})},D=(a(172),a(345)),B=a(337);const I=(e,t,a,s)=>a<e.length-1&&e[a+1].sender._id===t.sender._id&&e[a].sender._id!==s?33:a<e.length-1&&e[a+1].sender._id!==t.sender._id&&e[a].sender._id!==s||a===e.length-1&&e[a].sender._id!==s?0:"auto",N=(e,t,a,s)=>a<e.length-1&&(e[a+1].sender._id!==t.sender._id||void 0===e[a+1].sender._id)&&e[a].sender._id!==s,W=(e,t,a)=>t===e.length-1&&e[e.length-1].sender._id!==a&&e[e.length-1].sender._id,L=(e,t,a)=>a>0&&e[a-1].sender._id===t.sender._id,G=(e,t)=>{var a;return(null===(a=t[0])||void 0===a?void 0:a._id)===(null===e||void 0===e?void 0:e._id)?t[1].name:t[0].name};var M=a(358),P=a(344),T=a(204),U=a(46),V=a(347),$=a(346);var q=e=>{let{user:t,children:a}=e;const{isOpen:s,onOpen:i,onClose:r}=Object(P.a)(),o=Object(T.d)("rgba(255, 255, 255, 0.4)","rgba(32, 32, 35, 0.35)"),c=Object(T.d)("1px solid rgba(0, 0, 0, 0.15)","1px solid rgba(255, 255, 255, 0.1)");return Object(w.jsxs)(w.Fragment,{children:[a?Object(w.jsx)(n.a,{onClick:i,cursor:"pointer",children:a}):Object(w.jsx)(D.a,{d:{base:"flex"},icon:Object(w.jsx)($.a,{}),onClick:i}),Object(w.jsxs)(U.a,{isOpen:s,onClose:r,isCentered:!0,size:"sm",children:[Object(w.jsx)(U.h,{}),Object(w.jsxs)(U.d,{backdropFilter:"blur(12px)",background:o,border:c,borderRadius:"2xl",boxShadow:"lg",children:[Object(w.jsx)(U.g,{fontSize:"2xl",fontFamily:"Work sans",textAlign:"center",color:Object(T.d)("gray.800","whiteAlpha.900"),children:t.name}),Object(w.jsx)(U.c,{}),Object(w.jsxs)(U.b,{display:"flex",flexDirection:"column",alignItems:"center",pb:6,children:[Object(w.jsx)(V.a,{borderRadius:"full",boxSize:"150px",src:t.pic,alt:t.name,mb:4,border:"4px solid white",shadow:"md"}),Object(w.jsxs)(d.a,{fontSize:"lg",fontFamily:"Work sans",children:["Email: ",t.email]})]})]})]})]})},J=a(351),Y=a(369),H=a(195),K=a(367),Q=a(349),X=a(350),Z=a(348),ee=a(107),te=a(375);var ae=e=>{let{isOpen:t,onClose:a,message:i}=e;const{selectedChat:r,user:n}=_(),c=Object(o.a)(),[l,d]=Object(s.useState)(i||""),[b,j]=Object(s.useState)(""),[x,u]=Object(s.useState)("me"),[m,O]=Object(s.useState)(!1);Object(s.useEffect)((()=>{d(i||"")}),[i]);return Object(w.jsxs)(U.a,{isOpen:t,onClose:a,size:"md",isCentered:!0,children:[Object(w.jsx)(U.h,{}),Object(w.jsxs)(U.d,{children:[Object(w.jsx)(U.g,{children:"Set a Reminder"}),Object(w.jsx)(U.c,{}),Object(w.jsxs)(U.b,{children:[Object(w.jsx)(Z.a,{placeholder:"Reminder message...",value:l,onChange:e=>d(e.target.value),mb:3}),Object(w.jsx)(p.a,{type:"datetime-local",value:b,onChange:e=>j(e.target.value),mb:3}),Object(w.jsx)(ee.a,{onChange:u,value:x,children:Object(w.jsxs)(g.b,{direction:"row",children:[Object(w.jsx)(te.a,{value:"me",children:"Private"}),Object(w.jsx)(te.a,{value:"us",children:"Public"})]})})]}),Object(w.jsxs)(U.f,{children:[Object(w.jsx)(h.a,{variant:"ghost",mr:3,onClick:a,children:"Cancel"}),Object(w.jsx)(h.a,{colorScheme:"teal",onClick:async()=>{if(l&&b&&("us"!==x||(null===r||void 0===r?void 0:r._id)))try{O(!0);const e={headers:{Authorization:"Bearer ".concat(n.token)}},t={message:l,dueAt:b,type:x,chatId:"us"===x?r._id:void 0};if(await y.a.post("/api/reminders",t,e),"Notification"in window&&"granted"===Notification.permission&&"serviceWorker"in navigator){const e=new Date(b).getTime()-Date.now();e>0&&setTimeout((async()=>{(await navigator.serviceWorker.ready).showNotification("\ud83d\udd14 Reminder",{body:l,icon:"https://cdn-icons-png.flaticon.com/512/786/786197.png",tag:"reminder-".concat(Date.now()),renotify:!0,actions:[{action:"mark-done",title:"\u2714\ufe0f Mark as Done"},{action:"remind-again",title:"\ud83d\udd01 Remind Me Again"}],data:{token:n.token,reminderText:l}})}),e)}c({title:"Reminder created",status:"success",duration:3e3,isClosable:!0}),d(""),j(""),u("me"),a()}catch(i){var e,t,s;console.error("Reminder creation error:",(null===(e=i.response)||void 0===e?void 0:e.data)||i),c({title:"Error",description:(null===(t=i.response)||void 0===t||null===(s=t.data)||void 0===s?void 0:s.message)||"Could not set reminder",status:"error",duration:3e3,isClosable:!0})}finally{O(!1)}else c({title:"All fields required",status:"warning",duration:3e3,isClosable:!0})},isLoading:m,children:"Save"})]})]})]})};var se=e=>{let{message:t}=e;const[a,i]=Object(s.useState)(null),{isOpen:r,onOpen:n,onClose:c}=Object(P.a)();Object(o.a)();return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsxs)(K.a,{isLazy:!0,children:[Object(w.jsx)(K.b,{as:D.a,icon:Object(w.jsx)(Q.a,{}),size:"sm",variant:"ghost",_hover:{bg:"gray.100"},"aria-label":"Set Reminder"}),Object(w.jsx)(K.e,{zIndex:9999,children:Object(w.jsx)(K.d,{icon:Object(w.jsx)(X.a,{}),onClick:()=>{i(t),n()},children:"Set Reminder from Message"})})]}),Object(w.jsx)(ae,{isOpen:r,onClose:c,message:a})]})};a(262);var ie=e=>{let{messages:t}=e;const{user:a}=_();return Object(w.jsx)(H.a,{children:t&&t.map(((e,s)=>{const i=e.sender._id===a._id;return Object(w.jsxs)("div",{className:"chat-message-wrapper",style:{display:"flex",justifyContent:i?"flex-end":"flex-start",alignItems:"center",gap:"6px",marginBottom:"6px"},children:[!i&&(N(t,e,s,a._id)||W(t,s,a._id))&&Object(w.jsx)(Y.a,{label:e.sender.name,placement:"bottom-start",hasArrow:!0,children:Object(w.jsx)(J.a,{mt:"7px",mr:1,size:"sm",cursor:"pointer",name:e.sender.name,src:e.sender.pic})}),Object(w.jsxs)("div",{className:"chat-bubble-wrapper",children:[Object(w.jsxs)("span",{className:"message-bubble",style:{backgroundColor:"rgba(255, 255, 255, 0.15)",backdropFilter:"blur(12px)",WebkitBackdropFilter:"blur(12px)",border:"1px solid rgba(255, 255, 255, 0.2)",color:i?"#f0f9ff":"#e6fff2",borderRadius:"20px",padding:"8px 12px",marginLeft:I(t,e,s,a._id),marginTop:L(t,e,s,a._id)?3:10,display:"inline-block",whiteSpace:"pre-wrap",wordBreak:"break-word",fontSize:"14px",maxWidth:"75%",position:"relative"},children:[e.content,Object(w.jsx)("div",{style:{fontSize:"9px",color:"#666",textAlign:"right",marginTop:"4px"},children:new Date(e.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),Object(w.jsx)("div",{className:"reminder-button-hover",children:Object(w.jsx)(se,{message:e.content})})]})]},e._id)}))})},re=a(196),oe=a.n(re),ne=a(197),ce=a(353),le=a(352);var de=e=>{let{user:t,handleFunction:a,admin:s}=e;return Object(w.jsxs)(le.a,{px:2,py:1,borderRadius:"lg",m:1,mb:2,variant:"solid",fontSize:12,colorScheme:"purple",cursor:"pointer",onClick:a,children:[t.name,s===t._id&&Object(w.jsx)("span",{children:" (Admin)"}),Object(w.jsx)(ce.a,{pl:1})]})};var be=e=>{let{user:t,handleFunction:a}=e;return Object(w.jsxs)(n.a,{onClick:a,cursor:"pointer",bg:"#E8E8E8",_hover:{background:"#38B2AC",color:"white"},w:"100%",display:"flex",alignItems:"center",color:"black",px:3,py:2,mb:2,borderRadius:"lg",children:[Object(w.jsx)(J.a,{mr:2,size:"sm",cursor:"pointer",name:t.name,src:t.pic}),Object(w.jsxs)(n.a,{children:[Object(w.jsx)(d.a,{children:t.name}),Object(w.jsxs)(d.a,{fontSize:"xs",children:[Object(w.jsx)("b",{children:"Email:"})," ",t.email]})]})]})};var je=e=>{let{fetchMessages:t,fetchAgain:a,setFetchAgain:i}=e;const{isOpen:r,onOpen:c,onClose:l}=Object(P.a)(),[d,b]=Object(s.useState)(),[j,u]=Object(s.useState)(""),[m,O]=Object(s.useState)([]),[g,f]=Object(s.useState)(!1),[v,C]=Object(s.useState)(!1),k=Object(o.a)(),{selectedChat:S,setSelectedChat:z,user:A}=_(),F=async e=>{if(S.users.find((t=>t._id===e._id)))k({title:"User Already in group!",status:"error",duration:5e3,isClosable:!0,position:"bottom"});else if(S.groupAdmin._id===A._id){try{f(!0);const t={headers:{Authorization:"Bearer ".concat(A.token)}},{data:s}=await y.a.put("/api/chat/groupadd",{chatId:S._id,userId:e._id},t);z(s),i(!a),f(!1)}catch(t){k({title:"Error Occured!",description:t.response.data.message,status:"error",duration:5e3,isClosable:!0,position:"bottom"}),f(!1)}b("")}else k({title:"Only admins can add someone!",status:"error",duration:5e3,isClosable:!0,position:"bottom"})},R=async e=>{if(S.groupAdmin._id===A._id||e._id===A._id){try{f(!0);const s={headers:{Authorization:"Bearer ".concat(A.token)}},{data:r}=await y.a.put("/api/chat/groupremove",{chatId:S._id,userId:e._id},s);e._id===A._id?z():z(r),i(!a),t(),f(!1)}catch(s){k({title:"Error Occured!",description:s.response.data.message,status:"error",duration:5e3,isClosable:!0,position:"bottom"}),f(!1)}b("")}else k({title:"Only admins can remove someone!",status:"error",duration:5e3,isClosable:!0,position:"bottom"})};return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(D.a,{d:{base:"flex"},icon:Object(w.jsx)($.a,{}),onClick:c}),Object(w.jsxs)(U.a,{onClose:l,isOpen:r,isCentered:!0,children:[Object(w.jsx)(U.h,{}),Object(w.jsxs)(U.d,{children:[Object(w.jsx)(U.g,{fontSize:"35px",fontFamily:"Work sans",d:"flex",justifyContent:"center",children:S.chatName}),Object(w.jsx)(U.c,{}),Object(w.jsxs)(U.b,{d:"flex",flexDir:"column",alignItems:"center",children:[Object(w.jsx)(n.a,{w:"100%",d:"flex",flexWrap:"wrap",pb:3,children:S.users.map((e=>Object(w.jsx)(de,{user:e,admin:S.groupAdmin,handleFunction:()=>R(e)},e._id)))}),Object(w.jsxs)(x.a,{d:"flex",children:[Object(w.jsx)(p.a,{placeholder:"Chat Name",mb:3,value:d,onChange:e=>b(e.target.value)}),Object(w.jsx)(h.a,{variant:"solid",colorScheme:"teal",ml:1,isLoading:v,onClick:async()=>{if(d){try{C(!0);const e={headers:{Authorization:"Bearer ".concat(A.token)}},{data:t}=await y.a.put("/api/chat/rename",{chatId:S._id,chatName:d},e);console.log(t._id),z(t),i(!a),C(!1)}catch(e){k({title:"Error Occured!",description:e.response.data.message,status:"error",duration:5e3,isClosable:!0,position:"bottom"}),C(!1)}b("")}},children:"Update"})]}),Object(w.jsx)(x.a,{children:Object(w.jsx)(p.a,{placeholder:"Add User to group",mb:1,onChange:e=>(async e=>{if(u(e),e)try{f(!0);const e={headers:{Authorization:"Bearer ".concat(A.token)}},{data:t}=await y.a.get("/api/user?search=".concat(j),e);console.log(t),f(!1),O(t)}catch(t){k({title:"Error Occured!",description:"Failed to Load the Search Results",status:"error",duration:5e3,isClosable:!0,position:"bottom-left"}),f(!1)}})(e.target.value)})}),g?Object(w.jsx)(B.a,{size:"lg"}):null===m||void 0===m?void 0:m.map((e=>Object(w.jsx)(be,{user:e,handleFunction:()=>F(e)},e._id)))]}),Object(w.jsx)(U.f,{children:Object(w.jsx)(h.a,{onClick:()=>R(A),colorScheme:"red",children:"Leave Group"})})]})]})]})},he=a(355),xe=a(354),ue=a(356),pe=a(357),me=a(108),Oe=a.n(me);var ge=e=>{const{selectedChat:t,user:a}=_(),[i,r]=Object(s.useState)([]),[c,l]=Object(s.useState)(!1),[b,j]=Object(s.useState)(""),[x,u]=Object(s.useState)(null),{isOpen:m,onOpen:O,onClose:f}=Object(P.a)(),[v,C]=Object(s.useState)("active"),[k,S]=Object(s.useState)(!0),z=Object(o.a)(),A=async()=>{try{l(!0);const e={headers:{Authorization:"Bearer ".concat(a.token)}},{data:s}=await y.a.get("/api/reminders/chat/".concat(t._id,"?status=").concat(v),e);r(s)}catch(i){var e,s;z({title:"Failed to load reminders",description:(null===(e=i.response)||void 0===e||null===(s=e.data)||void 0===s?void 0:s.message)||i.message,status:"error",duration:4e3,isClosable:!0}),r([])}finally{l(!1)}},F=e=>Oe()(e).format("LT");return Object(s.useEffect)((()=>{t&&A()}),[t,v]),k?Object(w.jsxs)(n.a,{position:"fixed",top:"0",right:"0",height:"90vh",maxHeight:"100vh",width:{base:"100%",md:"350px"},bg:"rgba(0, 102, 204, 0.83)",backdropFilter:"blur(16px) saturate(180%)",borderLeft:"1px solid rgba(0, 128, 0, 0.3)",boxShadow:"lg",border:"1px solid rgba(255, 255, 255, 0.2)",zIndex:"30",display:"flex",flexDirection:"column",borderRadius:"md",overflow:"hidden",children:[Object(w.jsx)(n.a,{bg:"white",borderBottom:"1px solid #eee",flexShrink:0,p:3,borderTopRadius:"md",children:Object(w.jsxs)(g.a,{justify:"space-between",w:"100%",spacing:2,children:[Object(w.jsx)(d.a,{fontSize:"l",fontWeight:"bold",color:"black",children:"Reminders"}),Object(w.jsxs)(g.a,{children:[Object(w.jsx)(h.a,{size:"sm",variant:"active"===v?"solid":"ghost",colorScheme:"green",onClick:()=>C("active"),children:"Active"}),Object(w.jsx)(h.a,{size:"sm",variant:"done"===v?"solid":"ghost",colorScheme:"gray",onClick:()=>C("done"),children:"Done"})]}),Object(w.jsxs)(g.a,{spacing:1,children:[Object(w.jsx)(Y.a,{label:"Refresh",children:Object(w.jsx)(D.a,{icon:Object(w.jsx)(xe.a,{}),size:"sm",variant:"outline",colorScheme:"gray",onClick:A,isDisabled:c,"aria-label":"Refresh"})}),Object(w.jsx)(Y.a,{label:"Close",children:Object(w.jsx)(D.a,{icon:Object(w.jsx)(ce.a,{}),size:"sm",variant:"ghost",colorScheme:"red",onClick:()=>S(!1),"aria-label":"Close Reminder Panel"})})]})]})}),Object(w.jsx)(n.a,{flex:"1",overflowY:"auto",px:3,py:2,children:c?Object(w.jsx)(B.a,{size:"lg"}):0===i.length?Object(w.jsx)(d.a,{children:"No reminders found for this group."}):Object(w.jsx)(g.c,{spacing:3,align:"stretch",children:i.map((e=>{return Object(w.jsxs)(n.a,{bg:"whiteAlpha.300",p:3,borderRadius:"md",shadow:"sm",children:[Object(w.jsx)(d.a,{fontWeight:"bold",children:e.message}),Object(w.jsxs)(g.a,{justify:"space-between",mt:2,children:[Object(w.jsx)(d.a,{fontSize:"sm",color:"gray.700",children:"done"===v?"\u2705 Done ".concat((t=e.updatedAt,Oe()(t).fromNow())):"\u23f0 Due at ".concat(F(e.dueAt))}),Object(w.jsxs)(g.a,{spacing:1,children:["active"===v&&Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(Y.a,{label:"Custom Snooze",children:Object(w.jsx)(D.a,{icon:Object(w.jsx)(xe.a,{}),size:"xs",colorScheme:"yellow",onClick:()=>{u(e._id),O()},"aria-label":"Custom Snooze"})}),Object(w.jsx)(Y.a,{label:"Snooze +10 min",children:Object(w.jsx)(D.a,{icon:Object(w.jsx)(he.a,{}),size:"xs",colorScheme:"yellow",onClick:()=>(async e=>{try{const t={headers:{Authorization:"Bearer ".concat(a.token)}},s=new Date;s.setMinutes(s.getMinutes()+10),await y.a.put("/api/reminders/".concat(e,"/reschedule"),{dueAt:s},t),A(),z({title:"Snoozed +10 minutes",status:"success",duration:3e3,isClosable:!0})}catch(i){var t,s;z({title:"Error",description:(null===(t=i.response)||void 0===t||null===(s=t.data)||void 0===s?void 0:s.message)||"Could not snooze reminder.",status:"error",duration:3e3,isClosable:!0})}})(e._id),"aria-label":"Quick Snooze"})})]}),Object(w.jsx)(Y.a,{label:"Mark Done",children:Object(w.jsx)(D.a,{icon:Object(w.jsx)(ue.a,{}),size:"xs",colorScheme:"green",onClick:()=>(async e=>{try{const t={headers:{Authorization:"Bearer ".concat(a.token)}};await y.a.put("/api/reminders/".concat(e,"/toggle-done"),{},t),A()}catch(i){var t,s;z({title:"Error",description:(null===(t=i.response)||void 0===t||null===(s=t.data)||void 0===s?void 0:s.message)||"Could not toggle done status.",status:"error",duration:3e3,isClosable:!0})}})(e._id),isDisabled:"done"===v,"aria-label":"Mark Done"})}),Object(w.jsx)(Y.a,{label:"Delete Reminder",children:Object(w.jsx)(D.a,{icon:Object(w.jsx)(pe.a,{}),size:"xs",colorScheme:"red",onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this reminder?"))try{const t={headers:{Authorization:"Bearer ".concat(a.token)}};await y.a.delete("/api/reminders/".concat(e),t),A()}catch(i){var t,s;z({title:"Error",description:(null===(t=i.response)||void 0===t||null===(s=t.data)||void 0===s?void 0:s.message)||"Could not delete reminder.",status:"error",duration:3e3,isClosable:!0})}})(e._id),"aria-label":"Delete Reminder"})})]})]})]},e._id);var t}))})}),Object(w.jsxs)(U.a,{isOpen:m,onClose:f,isCentered:!0,children:[Object(w.jsx)(U.h,{}),Object(w.jsxs)(U.d,{children:[Object(w.jsx)(U.g,{children:"Snooze Reminder"}),Object(w.jsx)(U.c,{}),Object(w.jsx)(U.b,{children:Object(w.jsx)(p.a,{type:"datetime-local",value:b,onChange:e=>j(e.target.value)})}),Object(w.jsxs)(U.f,{children:[Object(w.jsx)(h.a,{colorScheme:"yellow",mr:3,onClick:async()=>{if(b&&x)try{const e={headers:{Authorization:"Bearer ".concat(a.token)}};await y.a.put("/api/reminders/".concat(x,"/reschedule"),{dueAt:b},e),A(),f(),j(""),u(null),z({title:"Reminder snoozed",description:"New time set for ".concat(Oe()(b).format("lll")),status:"success",duration:4e3,isClosable:!0})}catch(s){var e,t;z({title:"Error",description:(null===(e=s.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||"Could not snooze.",status:"error",duration:3e3,isClosable:!0})}},children:"Snooze"}),Object(w.jsx)(h.a,{variant:"ghost",onClick:f,children:"Cancel"})]})]})]})]}):null};var fe,ye;var ve=e=>{let{fetchAgain:t,setFetchAgain:a}=e;const[i,r]=Object(s.useState)([]),[c,l]=Object(s.useState)(!1),[b,j]=Object(s.useState)(""),[h,u]=Object(s.useState)(!1),[m,O]=Object(s.useState)(!1),[g,f]=Object(s.useState)(!1),[v,C]=Object(s.useState)(!1),S=Object(o.a)(),z={loop:!0,autoplay:!0,animationData:ne,rendererSettings:{preserveAspectRatio:"xMidYMid slice"}},{selectedChat:A,setSelectedChat:F,user:R,notification:E,setNotification:I}=_(),N=async()=>{if(A)try{const e={headers:{Authorization:"Bearer ".concat(R.token)}};l(!0);const{data:t}=await y.a.get("/api/message/".concat(A._id),e);r(t),l(!1),fe.emit("join chat",A._id)}catch(e){S({title:"Error Occurred!",description:"Failed to load messages",status:"error",duration:5e3,isClosable:!0,position:"bottom"})}};Object(s.useEffect)((()=>{(fe=k()("http://localhost:5000")).emit("setup",R),fe.on("connected",(()=>u(!0))),fe.on("typing",(()=>f(!0))),fe.on("stop typing",(()=>f(!1)))}),[]),Object(s.useEffect)((()=>{N(),ye=A}),[A]),Object(s.useEffect)((()=>{fe.on("message recieved",(e=>{ye&&ye._id===e.chat._id?r([...i,e]):E.includes(e)||(I([e,...E]),a(!t))}))}));return Object(w.jsx)(w.Fragment,{children:A?Object(w.jsxs)(n.a,{display:"flex",w:"100%",h:"100%",position:"relative",bg:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(14px) saturate(180%)",WebkitBackdropFilter:"blur(14px) saturate(180%)",borderRadius:"lg",border:"1px solid rgba(255, 255, 255, 0.1)",boxShadow:"0 8px 32px 0 rgba(31, 38, 135, 0.37)",children:[Object(w.jsxs)(n.a,{flex:"1",display:"flex",flexDirection:"column",children:[Object(w.jsxs)(d.a,{fontSize:{base:"25px",md:"30px"},pb:3,px:2,fontFamily:"Work sans",d:"flex",justifyContent:{base:"space-between"},alignItems:"center",children:[Object(w.jsx)(D.a,{d:{base:"flex",md:"none"},icon:Object(w.jsx)(M.a,{}),onClick:()=>F("")}),i&&(A.isGroupChat?Object(w.jsxs)(w.Fragment,{children:[A.chatName.toUpperCase(),Object(w.jsx)(D.a,{icon:Object(w.jsx)("span",{role:"img","aria-label":"brain",children:"\ud83e\udde0"}),size:"sm",variant:"ghost",ml:2,onClick:()=>C(!v),"aria-label":"Brain"}),Object(w.jsx)(je,{fetchMessages:N,fetchAgain:t,setFetchAgain:a}),Object(w.jsx)(se,{message:null})]}):Object(w.jsxs)(w.Fragment,{children:[G(R,A.users),Object(w.jsx)(q,{user:(W=R,L=A.users,L[0]._id===W._id?L[1]:L[0])}),Object(w.jsx)(se,{message:null})]}))]}),Object(w.jsxs)(n.a,{d:"flex",flexDir:"column",justifyContent:"flex-end",p:3,w:"100%",h:"100%",bg:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(10px)",borderRadius:"lg",border:"1px solid rgba(255, 255, 255, 0.1)",overflowY:"hidden",boxShadow:"sm",children:[c?Object(w.jsx)(B.a,{size:"xl",w:20,h:20,alignSelf:"center",margin:"auto"}):Object(w.jsx)("div",{className:"messages",children:Object(w.jsx)(ie,{messages:i})}),Object(w.jsxs)(x.a,{onKeyDown:async e=>{if("Enter"===e.key&&b){fe.emit("stop typing",A._id);try{const e={headers:{"Content-type":"application/json",Authorization:"Bearer ".concat(R.token)}};j("");const{data:t}=await y.a.post("/api/message",{content:b,chatId:A},e);fe.emit("new message",t),r([...i,t])}catch(t){S({title:"Error Occurred!",description:"Failed to send message",status:"error",duration:5e3,isClosable:!0,position:"bottom"})}}},id:"first-name",isRequired:!0,mt:3,children:[g&&Object(w.jsx)("div",{children:Object(w.jsx)(oe.a,{options:z,width:70,style:{marginBottom:15,marginLeft:0}})}),Object(w.jsx)(p.a,{variant:"filled",bg:"rgba(255, 255, 255, 0.2)",color:"white",_placeholder:{color:"gray.300"},placeholder:"Enter a message...",value:b,onChange:e=>{if(j(e.target.value),!h)return;m||(O(!0),fe.emit("typing",A._id));let t=(new Date).getTime();setTimeout((()=>{(new Date).getTime()-t>=3e3&&m&&(fe.emit("stop typing",A._id),O(!1))}),3e3)}})]})]})]}),A.isGroupChat&&v&&Object(w.jsx)(ge,{onClose:()=>C(!1),selectedChat:A,token:R.token})]}):Object(w.jsx)(n.a,{d:"flex",alignItems:"center",justifyContent:"center",h:"100%",children:Object(w.jsx)(d.a,{fontSize:"3xl",pb:3,fontFamily:"Work sans",children:"Click on a user to start chatting"})})});var W,L};var Ce=e=>{let{fetchAgain:t,setFetchAgain:a}=e;const{selectedChat:s}=_();return Object(w.jsx)(n.a,{display:{base:s?"flex":"none",md:"flex"},gap:3,alignItems:"center",flexDir:"column",p:3,w:{base:"100%",md:"68%"},h:"100%",borderRadius:"10px",background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(12px)",children:Object(w.jsx)(ve,{fetchAgain:t,setFetchAgain:a})})},ke=a(359),we=a(368);var Se=()=>Object(w.jsxs)(g.b,{children:[Object(w.jsx)(we.a,{height:"45px"}),Object(w.jsx)(we.a,{height:"45px"}),Object(w.jsx)(we.a,{height:"45px"}),Object(w.jsx)(we.a,{height:"45px"}),Object(w.jsx)(we.a,{height:"45px"}),Object(w.jsx)(we.a,{height:"45px"}),Object(w.jsx)(we.a,{height:"45px"}),Object(w.jsx)(we.a,{height:"45px"}),Object(w.jsx)(we.a,{height:"45px"}),Object(w.jsx)(we.a,{height:"45px"}),Object(w.jsx)(we.a,{height:"45px"}),Object(w.jsx)(we.a,{height:"45px"})]});var ze=e=>{let{children:t}=e;const{isOpen:a,onOpen:i,onClose:r}=Object(P.a)(),[c,l]=Object(s.useState)(),[d,b]=Object(s.useState)([]),[j,u]=Object(s.useState)(""),[m,O]=Object(s.useState)([]),[g,f]=Object(s.useState)(!1),v=Object(o.a)(),{user:C,chats:k,setChats:S}=_();return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("span",{onClick:i,children:t}),Object(w.jsxs)(U.a,{onClose:r,width:"90%",w:"90%",isOpen:a,isCentered:!0,children:[Object(w.jsx)(U.h,{}),Object(w.jsxs)(U.d,{bg:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.2)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.2)",borderRadius:"lg",w:"94%",color:"white",children:[Object(w.jsx)(U.g,{fontSize:"35px",fontFamily:"Work sans",textAlign:"center",color:"white",d:"flex",justifyContent:"center",children:"Create Group"}),Object(w.jsx)(U.c,{color:"white"}),Object(w.jsxs)(U.b,{d:"flex",flexDir:"column",alignItems:"center",w:"100%",children:[Object(w.jsx)(x.a,{children:Object(w.jsx)(p.a,{placeholder:"Chat Name",bg:"rgba(255,255,255,0.1)",_placeholder:{color:"gray.300"},border:"1px solid rgba(255, 255, 255, 0.2)",color:"white",mb:3,onChange:e=>l(e.target.value)})}),Object(w.jsx)(x.a,{children:Object(w.jsx)(p.a,{placeholder:"Add Users ",bg:"rgba(255,255,255,0.1)",_placeholder:{color:"gray.300"},border:"1px solid rgba(255, 255, 255, 0.2)",color:"white",mb:1,onChange:e=>(async e=>{if(u(e),e)try{f(!0);const t={headers:{Authorization:"Bearer ".concat(C.token)}},{data:a}=await y.a.get("/api/user?search=".concat(e),t),s=a.filter((t=>t.name.toLowerCase().startsWith(e.toLowerCase())||t.email.toLowerCase().startsWith(e.toLowerCase())));O(s),f(!1)}catch(s){var t,a;v({title:"Error Occurred!",description:(null===s||void 0===s||null===(t=s.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message)||"Failed to load the search results.",status:"error",duration:5e3,isClosable:!0,position:"bottom-left"}),f(!1)}})(e.target.value)})}),Object(w.jsx)(n.a,{w:"100%",d:"flex",flexWrap:"wrap",borderRadius:"50px",children:d.map((e=>Object(w.jsx)(de,{user:e,handleFunction:()=>{return t=e,void b(d.filter((e=>e._id!==t._id)));var t}},e._id)))}),g?Object(w.jsx)("div",{children:"Loading..."}):null===m||void 0===m?void 0:m.slice(0,4).map((e=>Object(w.jsx)(be,{user:e,handleFunction:()=>{return t=e,void(d.includes(t)?v({title:"User already added",status:"warning",duration:5e3,isClosable:!0,position:"top"}):b([...d,t]));var t}},e._id)))]}),Object(w.jsx)(U.f,{children:Object(w.jsx)(h.a,{onClick:async()=>{if(c&&d)try{const e={headers:{Authorization:"Bearer ".concat(C.token)}},{data:t}=await y.a.post("/api/chat/group",{name:c,users:JSON.stringify(d.map((e=>e._id)))},e);S([t,...k]),r(),v({title:"New Group Chat Created!",status:"success",duration:5e3,isClosable:!0,position:"bottom"})}catch(e){v({title:"Failed to Create the Chat!",description:e.response.data,status:"error",duration:5e3,isClosable:!0,position:"bottom"})}else v({title:"Please fill all the feilds",status:"warning",duration:5e3,isClosable:!0,position:"top"})},colorScheme:"blue",borderRadius:"25px",children:"Create"})})]})]})]})};const _e=Object(C.io)("http://localhost:5000",{transports:["websocket"]});var Ae=e=>{let{fetchAgain:t}=e;const[a,i]=Object(s.useState)(),{selectedChat:r,setSelectedChat:c,user:l,chats:b,setChats:j}=_(),x=Object(o.a)(),u=async()=>{try{const e={headers:{Authorization:"Bearer ".concat(l.token)}},{data:t}=await y.a.get("/api/chat",e);j(t)}catch(e){x({title:"Error Occurred!",description:"Failed to load the chats",status:"error",duration:5e3,isClosable:!0,position:"bottom-left"})}};return Object(s.useEffect)((()=>{const e=JSON.parse(localStorage.getItem("userInfo"));return i(e),u(),_e.emit("setup",l),_e.on("message received",(()=>{u()})),()=>{_e.off("message received")}}),[t]),Object(w.jsxs)(n.a,{d:{base:r?"none":"flex",md:"flex"},flexDir:"column",alignItems:"center",p:1,w:{base:"100%",md:"31%"},borderRadius:"lg",bg:"rgba(255, 255, 255, 0.1)",boxShadow:"0 8px 32px 0 rgba(31, 38, 135, 0.37)",backdropFilter:"blur(10px)",WebkitBackdropFilter:"blur(10px)",children:[Object(w.jsxs)(n.a,{pb:3,px:3,fontSize:{base:"28px",md:"30px"},fontFamily:"Work sans",d:"flex",w:"100%",justifyContent:"space-between",alignItems:"center",color:"white",children:["All Chats",Object(w.jsx)(ze,{children:Object(w.jsx)(h.a,{d:"flex",borderRadius:"25px",bg:"rgba(255, 255, 255, 0.7)",fontSize:{base:"17px",md:"10px",lg:"17px"},rightIcon:Object(w.jsx)(ke.a,{}),children:"New Group"})})]}),Object(w.jsx)(n.a,{d:"flex",flexDir:"column",p:2,w:"100%",h:"100%",overflowY:"hidden",children:b&&a?Object(w.jsx)(g.b,{overflowY:"scroll",children:b.map((e=>{const t=e.isGroupChat?null:e.users.find((e=>e._id!==a._id));return Object(w.jsx)(n.a,{onClick:()=>c(e),cursor:"pointer",bg:r===e?"rgba(56, 178, 172, 0.4)":"rgba(255, 255, 255, 0.1)",color:r===e?"white":"blackAlpha.900",px:2,py:2,borderRadius:"lg",children:Object(w.jsxs)(g.a,{align:"flex-start",spacing:3,children:[Object(w.jsx)(J.a,{boxSize:"50px",src:e.isGroupChat?"":null===t||void 0===t?void 0:t.pic,name:e.isGroupChat?e.chatName:null===t||void 0===t?void 0:t.name,border:"2px solid rgba(255,255,255,0.3)",boxShadow:"0 0 10px rgba(255,255,255,0.1)"}),Object(w.jsxs)(n.a,{children:[Object(w.jsx)(d.a,{fontWeight:"bold",fontSize:"md",color:"white",children:e.isGroupChat?e.chatName:null===t||void 0===t?void 0:t.name}),e.latestMessage&&Object(w.jsxs)(d.a,{fontSize:"sm",noOfLines:1,color:"gray.300",children:[e.isGroupChat&&Object(w.jsxs)(d.a,{as:"span",fontWeight:"bold",color:"teal.200",children:[e.latestMessage.sender.name,":"," "]}),Object(w.jsx)(d.a,{as:"span",color:"white",children:e.latestMessage.content.length>50?e.latestMessage.content.substring(0,51)+"...":e.latestMessage.content})]})]})]})},e._id)}))}):Object(w.jsx)(Se,{})})]})},Fe=a(376),Re=a(361),Ee=a(362),De=a(200),Be=a(360);const Ie=[5,15,30];var Ne=e=>{let{isOpen:t,onClose:a,reminder:s,onResnooze:i}=e;const r=Object(o.a)();return Object(w.jsxs)(U.a,{isOpen:t,onClose:a,isCentered:!0,children:[Object(w.jsx)(U.h,{}),Object(w.jsxs)(U.d,{children:[Object(w.jsx)(U.g,{children:"Snooze Reminder"}),Object(w.jsx)(U.c,{}),Object(w.jsx)(U.b,{pb:4,children:Object(w.jsx)(g.c,{spacing:3,children:Ie.map((e=>Object(w.jsxs)(h.a,{onClick:()=>(async e=>{const t=new Date(Date.now()+60*e*1e3);try{await y.a.put("/api/reminders/".concat(s._id,"/reschedule"),{dueAt:t},{headers:{Authorization:"Bearer ".concat(s.token)}}),r({title:"Snoozed for ".concat(e," min"),status:"success",duration:2e3,isClosable:!0}),i()}catch(a){r({title:"Failed to snooze reminder",status:"error",duration:2e3,isClosable:!0})}})(e),width:"100%",children:["Snooze for ",e," min"]},e)))})})]})]})};var We=e=>{let{isOpen:t,onClose:a}=e;const{user:i}=_(),[r,c]=Object(s.useState)([]),l=Object(o.a)(),{isOpen:b,onOpen:j,onClose:h}=Object(P.a)(),[x,u]=Object(s.useState)(null),p=async()=>{try{const e={headers:{Authorization:"Bearer ".concat(i.token)}},{data:t}=await y.a.get("/api/reminders",e);c(t)}catch(e){l({title:"Error fetching reminders",status:"error",duration:3e3,isClosable:!0})}};Object(s.useEffect)((()=>{t&&p()}),[t]);const m=r.filter((e=>!e.isDone)).sort(((e,t)=>new Date(e.dueAt)-new Date(t.dueAt))),O=r.filter((e=>e.isDone)).sort(((e,t)=>new Date(t.dueAt)-new Date(e.dueAt)));return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsxs)(U.a,{isOpen:t,onClose:a,size:"lg",children:[Object(w.jsx)(U.h,{}),Object(w.jsxs)(U.d,{children:[Object(w.jsx)(U.g,{children:"\ud83e\udde0 My Reminders"}),Object(w.jsx)(U.c,{}),Object(w.jsxs)(U.b,{children:[0===m.length?Object(w.jsx)(d.a,{children:"No upcoming private reminders"}):Object(w.jsx)(g.c,{align:"stretch",spacing:3,children:m.map((e=>Object(w.jsxs)(n.a,{p:3,borderWidth:"1px",borderRadius:"lg",bg:"gray.50",children:[Object(w.jsx)(d.a,{fontWeight:"bold",children:e.content}),Object(w.jsxs)(d.a,{fontSize:"sm",children:["\ud83d\udd52 ",new Date(e.dueAt).toLocaleString()]}),Object(w.jsxs)(d.a,{fontSize:"xs",color:"gray.500",children:["\u23f0 Snoozed ",e.remindAgainCount||0," times"]}),Object(w.jsxs)(g.a,{mt:2,children:[Object(w.jsx)(D.a,{icon:Object(w.jsx)(he.a,{}),size:"sm","aria-label":"Snooze",onClick:()=>(e=>{u(e),j()})(e)}),Object(w.jsx)(D.a,{icon:Object(w.jsx)(ue.a,{}),size:"sm","aria-label":"Mark as Done",colorScheme:"green",onClick:()=>(async e=>{try{await y.a.put("/api/reminders/".concat(e,"/done"),{},{headers:{Authorization:"Bearer ".concat(i.token)}}),p()}catch(t){l({title:"Error marking reminder as done",status:"error",duration:3e3,isClosable:!0})}})(e._id)}),Object(w.jsx)(D.a,{icon:Object(w.jsx)(pe.a,{}),size:"sm","aria-label":"Delete",onClick:()=>(async e=>{try{await y.a.delete("/api/reminders/".concat(e),{headers:{Authorization:"Bearer ".concat(i.token)}}),c(r.filter((t=>t._id!==e)))}catch(t){l({title:"Error deleting reminder",status:"error",duration:3e3,isClosable:!0})}})(e._id)})]})]},e._id)))}),O.length>0&&Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(Be.a,{my:4}),Object(w.jsx)(d.a,{fontSize:"md",fontWeight:"semibold",children:"\u2705 Completed Reminders"}),Object(w.jsx)(g.c,{align:"stretch",spacing:3,mt:2,children:O.map((e=>Object(w.jsxs)(n.a,{p:3,bg:"gray.100",borderRadius:"md",borderWidth:"1px",borderColor:"gray.200",children:[Object(w.jsx)(d.a,{fontWeight:"semibold",color:"gray.700",children:e.content}),Object(w.jsxs)(d.a,{fontSize:"xs",color:"gray.500",children:["Completed at ",new Date(e.dueAt).toLocaleString()]}),Object(w.jsxs)(d.a,{fontSize:"xs",color:"gray.400",children:["Snoozed ",e.remindAgainCount||0," times"]})]},e._id)))})]})]})]})]}),x&&Object(w.jsx)(Ne,{isOpen:b,onClose:h,reminder:x,onResnooze:()=>{h(),p()}})]})},Le=a(106),Ge=a.n(Le),Me=a(374);function Pe(e){let{type:t}=e;const[a,i]=Object(s.useState)([]),[r,c]=Object(s.useState)(!0),{user:b}=_(),j=Object(o.a)(),h=async()=>{c(!0);try{const e={headers:{Authorization:"Bearer ".concat(b.token)}},a="private"===t?"/api/reminders/user":"/api/reminders/public",{data:s}=await y.a.get(a,e);i(s)}catch(s){var e,a;j({title:"Failed to load reminders",description:(null===s||void 0===s||null===(e=s.response)||void 0===e||null===(a=e.data)||void 0===a?void 0:a.message)||s.message,status:"error",duration:3e3,isClosable:!0})}finally{c(!1)}};Object(s.useEffect)((()=>{h()}),[t]);return r?Object(w.jsx)(B.a,{}):0===a.length?Object(w.jsxs)(d.a,{children:["No ",t," reminders"]}):Object(w.jsx)(g.c,{spacing:3,align:"stretch",children:a.map((e=>{var a;return Object(w.jsxs)(n.a,{p:3,borderWidth:"1px",borderRadius:"md",bg:"gray.50",children:[Object(w.jsx)(d.a,{fontWeight:"semibold",children:e.title||e.message}),Object(w.jsxs)(d.a,{fontSize:"sm",color:"gray.500",children:["Due: ",new Date(e.dueAt).toLocaleString()]}),"public"===t&&Object(w.jsxs)(d.a,{fontSize:"xs",color:"gray.400",children:["From: ",(null===(a=e.sender)||void 0===a?void 0:a.name)||"Unknown"]}),Object(w.jsxs)(l.a,{mt:2,gap:2,children:[Object(w.jsx)(Y.a,{label:"Mark as Done",children:Object(w.jsx)(D.a,{size:"sm",colorScheme:"green",icon:Object(w.jsx)(ue.a,{}),onClick:()=>(async e=>{try{await y.a.put("/api/reminders/".concat(e,"/done"),{},{headers:{Authorization:"Bearer ".concat(b.token)}}),j({title:"Marked as done!",status:"success",isClosable:!0}),h()}catch(s){var t,a;j({title:"Failed to mark as done",description:(null===s||void 0===s||null===(t=s.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message)||s.message,status:"error",isClosable:!0})}})(e._id),"aria-label":"Mark as Done"})}),Object(w.jsx)(Y.a,{label:"Remind Me Again",children:Object(w.jsx)(D.a,{size:"sm",colorScheme:"blue",icon:Object(w.jsx)(xe.a,{}),onClick:()=>(async e=>{try{const t=new Date(Date.now()+3e5);await y.a.put("/api/reminders/".concat(e,"/reschedule"),{dueAt:t},{headers:{Authorization:"Bearer ".concat(b.token)}}),j({title:"Reminder snoozed!",status:"info",isClosable:!0}),h()}catch(s){var t,a;j({title:"Failed to snooze reminder",description:(null===s||void 0===s||null===(t=s.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message)||s.message,status:"error",isClosable:!0})}})(e._id),"aria-label":"Snooze Reminder"})}),Object(w.jsx)(Y.a,{label:"Delete",children:Object(w.jsx)(D.a,{size:"sm",colorScheme:"red",icon:Object(w.jsx)(pe.a,{}),onClick:()=>(async e=>{try{await y.a.delete("/api/reminders/".concat(e),{headers:{Authorization:"Bearer ".concat(b.token)}}),j({title:"Reminder deleted",status:"warning",isClosable:!0}),h()}catch(s){var t,a;j({title:"Failed to delete reminder",description:(null===s||void 0===s||null===(t=s.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message)||s.message,status:"error",isClosable:!0})}})(e._id),"aria-label":"Delete Reminder"})})]})]},e._id)}))})}var Te=function(){const[e,t]=Object(s.useState)(!1),[a,i]=Object(s.useState)("private"),[r,c]=Object(s.useState)(""),[x,u]=Object(s.useState)(!1),[m,O]=Object(s.useState)(!1),[g,f]=Object(s.useState)([]),{isOpen:v,onOpen:C,onClose:k}=Object(P.a)(),{isOpen:S,onOpen:z,onClose:A}=Object(P.a)(),{isOpen:F,onOpen:R,onClose:E}=Object(P.a)(),{user:I,chats:N,setChats:W,selectedChat:L,setSelectedChat:G,notification:M,setNotification:V}=_(),$=Object(o.a)(),H=Object(j.e)(),X=Object(T.d)("rgba(255, 255, 255, 0.55)","rgba(0, 30, 60, 0.25)"),Z=Object(T.d)("1px solid rgba(0, 0, 255, 0.2)","1px solid rgba(200, 200, 255, 0.2)");return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsxs)(l.a,{justifyContent:"space-between",alignItems:"center",bg:X,backdropFilter:"blur(12px) saturate(180%)",borderBottom:"1px solid rgba(255, 255, 255, 0.2)",boxShadow:"0 4px 30px rgba(0, 0, 0, 0.1)",px:3,py:1.5,borderRadius:"md",children:[Object(w.jsx)(d.a,{fontSize:"2xl",fontWeight:"bold",fontFamily:"Work Sans",color:"white",children:"sawCollab"}),Object(w.jsxs)(l.a,{direction:"row",alignItems:"center",gap:4,children:[Object(w.jsx)(Y.a,{label:"Search Users",hasArrow:!0,children:Object(w.jsx)(D.a,{icon:Object(w.jsx)(Re.a,{}),variant:"ghost","aria-label":"Search Users",onClick:C,bg:"rgba(43, 2, 2, 0.05)",_hover:{bg:"rgba(255,255,255,0.15)"}})}),Object(w.jsx)(Y.a,{label:"Brain: Show Reminders",hasArrow:!0,children:Object(w.jsx)(D.a,{icon:Object(w.jsx)(De.a,{}),variant:"ghost","aria-label":"Show Reminders",onClick:()=>t(!e),bg:"rgba(43, 2, 2, 0.05)",_hover:{bg:"rgba(255,255,255,0.15)"},px:3,py:5})}),Object(w.jsx)(Y.a,{label:"Create Reminder",hasArrow:!0,children:Object(w.jsx)(D.a,{icon:Object(w.jsx)(ke.a,{}),variant:"ghost","aria-label":"Create Reminder",onClick:z,bg:"rgba(43, 2, 2, 0.05)",_hover:{bg:"rgba(255,255,255,0.15)"}})})]}),Object(w.jsxs)(Fe.a,{placement:"left",onClose:k,isOpen:v,children:[Object(w.jsx)(U.h,{}),Object(w.jsxs)(Fe.b,{children:[Object(w.jsx)(U.g,{borderBottomWidth:"1px",children:"Search Users"}),Object(w.jsxs)(U.b,{children:[Object(w.jsx)(p.a,{placeholder:"Search by name or email",value:r,onChange:e=>c(e.target.value),mb:4}),Object(w.jsx)(h.a,{onClick:async()=>{if(r.trim())try{u(!0);const e={headers:{Authorization:"Bearer ".concat(I.token)}},{data:t}=await y.a.get("/api/user?search=".concat(r),e),a=t.filter((e=>e._id!==I._id));f(a),u(!1)}catch(e){$({title:"Error Occurred!",description:"Failed to load the search results",status:"error",duration:5e3,isClosable:!0,position:"bottom-left"})}else $({title:"Please enter something in search",status:"warning",duration:5e3,isClosable:!0,position:"top-left"})},colorScheme:"blue",mb:4,children:"Search"}),x?Object(w.jsx)(Se,{}):g.map((e=>Object(w.jsx)(be,{user:e,handleFunction:()=>(async e=>{try{O(!0);const t={headers:{"Content-type":"application/json",Authorization:"Bearer ".concat(I.token)}},{data:a}=await y.a.post("/api/chat",{userId:e},t);N.find((e=>e._id===a._id))||W([a,...N]),G(a),O(!1),k()}catch(t){$({title:"Error fetching the chat",description:t.message,status:"error",duration:5e3,isClosable:!0,position:"bottom-left"}),O(!1)}})(e._id)},e._id))),m&&Object(w.jsx)(B.a,{ml:"auto",display:"flex"})]})]})]}),Object(w.jsxs)(l.a,{gap:2,align:"center",children:[Object(w.jsxs)(K.a,{children:[Object(w.jsxs)(K.b,{position:"relative",p:0,zIndex:"popover",children:[Object(w.jsx)(Ge.a,{count:(null===M||void 0===M?void 0:M.length)||0,effect:Le.Effect.SCALE}),Object(w.jsx)(Q.a,{fontSize:"2xl",color:"white"})]}),Object(w.jsx)(Me.a,{children:Object(w.jsxs)(K.e,{zIndex:"popover",children:[!(null===M||void 0===M?void 0:M.length)&&Object(w.jsx)(K.d,{children:"No New Messages"}),null===M||void 0===M?void 0:M.map((e=>{var t;return Object(w.jsx)(K.d,{onClick:()=>{G(e.chat),V(M.filter((t=>t!==e)))},children:Object(w.jsxs)(n.a,{children:[Object(w.jsx)(d.a,{fontWeight:"bold",children:e.chat.isGroupChat?"Group: ".concat(e.chat.chatName):" ".concat(null===(t=e.chat.users.find((e=>e._id!==I._id)))||void 0===t?void 0:t.name)}),Object(w.jsx)(d.a,{fontSize:"sm",color:"gray.500",noOfLines:1,children:e.content||"New Message..."})]})},e._id)}))]})})]}),Object(w.jsxs)(K.a,{children:[Object(w.jsx)(K.b,{as:h.a,bg:"rgba(255, 255, 255, 0.1)",_hover:{bg:"rgba(255, 255, 255, 0.2)"},_active:{bg:"rgba(255, 255, 255, 0.3)"},backdropFilter:"blur(12px)",borderRadius:"full",px:2,py:1,minW:"auto",rightIcon:Object(w.jsx)(Ee.a,{}),zIndex:"popover",children:Object(w.jsx)(J.a,{size:"sm",name:I.name,src:I.pic})}),Object(w.jsx)(Me.a,{children:Object(w.jsxs)(K.e,{zIndex:"popover",children:[Object(w.jsx)(q,{user:I,children:Object(w.jsx)(K.d,{children:"My Profile"})}),Object(w.jsx)(K.c,{}),Object(w.jsx)(K.d,{onClick:()=>{localStorage.removeItem("userInfo"),H.push("/")},children:"Logout"})]})})]})]})]}),Object(w.jsx)(ae,{isOpen:S,onClose:A}),Object(w.jsx)(We,{isOpen:F,onClose:E}),e&&Object(w.jsxs)(n.a,{position:"fixed",top:"0",right:"0",height:"100vh",width:{base:"100%",md:"350px"},bg:X,backdropFilter:"blur(14px)",borderLeft:Z,zIndex:"30",p:0,display:"flex",flexDirection:"column",borderRadius:"md",children:[Object(w.jsx)(n.a,{p:5,flexShrink:0,children:Object(w.jsxs)(l.a,{justify:"space-between",align:"center",mb:4,children:[Object(w.jsx)(d.a,{fontSize:"xl",fontWeight:"bold",color:"white",children:"\ud83d\udd14 Reminders"}),Object(w.jsx)(D.a,{icon:Object(w.jsx)(Ee.a,{}),size:"sm",onClick:()=>t(!1),"aria-label":"Close sidebar"})]})}),Object(w.jsx)(n.a,{flex:"1",overflowY:"auto",px:5,pb:5,children:Object(w.jsxs)(b.e,{isFitted:!0,variant:"soft-rounded",colorScheme:"blue",children:[Object(w.jsxs)(b.b,{mb:"1em",children:[Object(w.jsx)(b.a,{onClick:()=>i("private"),children:"Private"}),Object(w.jsx)(b.a,{onClick:()=>i("public"),children:"Public"})]}),Object(w.jsxs)(b.d,{children:[Object(w.jsx)(b.c,{children:Object(w.jsx)(Pe,{type:"private"})}),Object(w.jsx)(b.c,{children:Object(w.jsx)(Pe,{type:"public"})})]})]})})]})]})};const Ue=async()=>{if(!("Notification"in window))return console.warn("\ud83d\udeab This browser does not support notifications."),!1;const e=Notification.permission;if(console.log("\ud83d\udd14 Notification permission currently:",e),"granted"===e)return!0;if("denied"!==e)try{const e=await Notification.requestPermission();return console.log("\ud83d\udd14 User responded with permission:",e),"granted"===e}catch(t){return console.error("\ud83d\uded1 Error requesting notification permission:",t),!1}return console.log("\ud83d\udd15 Notification permission was denied earlier."),!1};var Ve=()=>{const[e,t]=Object(s.useState)(!1),{user:a}=_();Object(s.useEffect)((()=>{const e=()=>{const e=.01*window.innerHeight;document.documentElement.style.setProperty("--vh","".concat(e,"px"))};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[]);return Object(w.jsxs)("div",{style:{width:"100vw",height:"100vh",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",display:"flex",flexDirection:"column"},children:[a&&Object(w.jsx)(Te,{}),Object(w.jsxs)(n.a,{d:"flex",justifyContent:"space-between",bgGradient:"linear(to-r, purple.800, blue.500)",w:"100%",p:"10px",display:"flex",h:"91.5vh",sx:{backdropFilter:"blur(14px)",WebkitBackdropFilter:"blur(14px)",background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"10px",boxShadow:"0 8px 32px 0 rgba(31, 38, 135, 0.37)"},children:[a&&Object(w.jsx)(Ae,{fetchAgain:e}),a&&Object(w.jsx)(Ce,{fetchAgain:e,setFetchAgain:t}),a&&Object(w.jsx)(We,{})]})]})};var $e=function(){return Object(s.useEffect)((()=>{(async()=>{try{const e=await navigator.serviceWorker.register("/service-worker.js");console.log("\u2705 Service Worker registered:",e),e.waiting&&e.waiting.postMessage({type:"SKIP_WAITING"});const t=await Ue();console.log("\ud83d\udd14 Notification permission granted?",t)}catch(e){console.error("\ud83d\uded1 Notification setup failed:",e)}})()}),[]),Object(w.jsxs)("div",{className:"App",children:[Object(w.jsx)(j.a,{path:"/",component:E,exact:!0}),Object(w.jsx)(j.a,{path:"/chats",component:Ve})]})};var qe=e=>{e&&e instanceof Function&&a.e(3).then(a.bind(null,378)).then((t=>{let{getCLS:a,getFID:s,getFCP:i,getLCP:r,getTTFB:o}=t;a(e),s(e),i(e),r(e),o(e)}))},Je=a(366),Ye=a(73);r.a.render(Object(w.jsx)(Je.a,{children:Object(w.jsx)(Ye.a,{children:Object(w.jsx)(A,{children:Object(w.jsx)($e,{})})})}),document.getElementById("root")),qe()}},[[314,1,2]]]);
//# sourceMappingURL=main.41a65255.chunk.js.map